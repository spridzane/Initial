<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><link href="../../../../../doc/style.css?colorTheme=Custom.OdoTheme" rel="stylesheet" type="text/css" media="all"></head><body><html><body><p><a name="top"></a></p><table width="100%"><tr><td style="border: none; text-align: left;"><span class="wikilink"><a href="https://odo.lv/Training/JavaExercise13">Prev</a></span><br><span class="xdocNavigation">13. JDBC</span></td><td style="border: none; text-align: right;"><span class="wikilink"><a href="https://odo.lv/Training/JavaExercise15">Next</a></span><br><span class="xdocNavigation">15. GUI Application</span></td></tr></table><h1 id="H14.exercise:UnitTesting"><span>14. exercise: Unit Testing</span></h1><p><strong>Tasks</strong></p><ul><li><span class="wikilink"><a href="#HPreparation">Preparation</a></span></li><li><span class="wikilink"><a href="#HSetuptestedclasses">Set up tested classes</a></span></li><li><span class="wikilink"><a href="#HCreationofnewJUnittestcase">Creation of new JUnit test case</a></span></li><li><span class="wikilink"><a href="#HManualtesting">Manual testing</a></span></li><li><span class="wikilink"><a href="#HAutomatedtesting">Automated testing</a></span><ul><li><span class="wikilink"><a href="#HAutomatedtestingusingmain2829methodofthetest">Automated testing using main() method of the test</a></span></li></ul></li><li><span class="wikilink"><a href="#HAutomatedtestingusingmodifiedTestSuite">Automated testing using modified Test Suite</a></span></li><li><span class="wikilink"><a href="#HOptionaltask">Optional task</a></span></li><li><span class="wikilink"><a href="#HMoreinfo">More info</a></span></li></ul><h2 id="HPreparation"><span>Preparation</span></h2><ol><li><div><p>Review presentation <span class="wikiinternallink"><a href="https://odo.lv/git/JTM/plain/doc/presentations/14_Junit.odp">JUnit</a></span></p><p>   <video src="https://odo.lv/ftp/lectures/Java14.ogv" width="300" controls></body></html>
<a href="https://odo.lv/ftp/lectures/Java14.ogv">Java14.ogv</a></body></html>
</video></p></div></li><li>Investigate <strong>jtm.activity14</strong> package</li><li>Install <span class="wikilink"><a href="https://odo.lv/Recipes/EclEmma">EclEmma</a></span> and check test coverage</li></ol><h2 id="HSetuptestedclasses"><span>Set up tested classes</span></h2><ol><li>Implement class <strong>Student</strong> similarly to <strong>Teacher</strong> class</li><li>Implement <strong>StudentManager</strong> class, similarly to <strong>TeacherManager</strong> class in <strong>activity13</strong>.<br>2. You can simply copy-paste methods and make necessary changes.<br>3. Note that you can introduce bugs here, as it can be that not all necessary changes are done correctly.</li></ol><h2 id="HCreationofnewJUnittestcase"><span>Creation of new JUnit test case</span></h2><ol><li>Right-click on <strong>jtm.activity14</strong> package in Package Explorer and select: <strong>New— New JUnit Test Case</strong>.</li><li>In <em>New JUnit Test case</em> window:<ol><li>Check that test <em>version</em> is: <strong>New JUnit 4 test</strong>,</li><li>Check that test <em>location</em> is: <strong>.../src/main/java</strong>,</li><li>Check that <em>package</em> is: <strong>jtm.activity14</strong>,</li><li>Set test Name: <strong>DatabaseUnitTest1</strong> (this name important, as it will be used by automated test of test)</li><li>If necessary, mark <strong>setUpBeforeClass()</strong>, <strong>tearDownAfterClass()</strong>,</li><li>If necessary, mark <strong>setUp()</strong> and <strong>tearDown()</strong>,</li><li>If necessary, mark <strong>GenerateComments</strong>,</li><li>Set <em>Class under test</em>: <strong>jtm.activity14.StudentManager</strong>,</li><li>Press <strong>Next</strong>.</li></ol></li><li>In <em>Test methods</em> window:<ol><li>Mark <strong>StudentManager</strong> class, to test all its methods,</li><li>If necessary, mark <strong>Create final method stubs</strong>,</li><li>If necessary, ark <strong>Create tasks for generated tests methods</strong>,</li><li>Press <strong>Finish</strong>.</li></ol></li></ol><h2 id="HManualtesting"><span>Manual testing</span></h2><ol><li>Select: <strong>Run— Run as— JUnit test</strong>, to test this file as simple unit test.</li><li>Right-click on test (or package) in Package explorer and select: <strong>Coverage as– JUnit test</strong>, to check coverage of the tested classes.</li></ol><h2 id="HAutomatedtesting"><span>Automated testing</span></h2><h3 id="HAutomatedtestingusingmain2829methodofthetest"><span>Automated testing using main() method of the test</span></h3><p>Automated testing and coverage reporting is performed by <strong>DatabaseUnitTest</strong>.java test, which is compiled in<strong> JTM.jar</strong> package.<br>To test, how it will work manually you can do following.</p><ol><li>Create <em>public static void main(String[] args)</em> method, to allow test run as Java application.</li><li><div><p>Create following body for this method:</p><div class="box"><div class="code">public static void main(String[] args) {<br>    DatabaseUnitTest dbUnitTest = new DatabaseUnitTest();<br>    dbUnitTest.test();<br>}</div></div></div></li><li><div><p>Select: <strong>Run— Run as...— Java application</strong>, to check, how your test will be executed from the automated test suite. You should see coverage status like:</p><div class="box"><div class="code">...<br>*** Total test coverage is: xx% ***</div></div><p>where <strong>xx</strong> is actual coverage of tested package.</p></div></li></ol><h2 id="HAutomatedtestingusingmodifiedTestSuite"><span>Automated testing using modified Test Suite</span></h2><ol><li>Open <strong>AllTests.java</strong> class in <strong>jtm.testSuite package</strong>,</li><li>If necessary, comment out unneeded classes from <span class="wikimodel-verbatim">..allTests() {printStat(  list,..</span></li><li>Run Test suite.</li></ol><h2 id="HOptionaltask"><span>Optional task</span></h2><ol><li><div><p>Select <strong>Help — Eclipse Marketplace...</strong>, for <em>name</em> enter <strong>jd</strong> and press <strong>Install</strong> for <em>Enhanced Class Decompiler</em> plugin.<br><strong>or</strong></p></div></li><li>Install and set up <strong><span class="wikilink"><a href="https://odo.lv/Recipes/JD-Eclipse"><span class="wikigeneratedlinkcontent">JD-Eclipse</span></a></span></strong> decompiler.</li><li>Check, how Junit tests are implemented in referenced <strong>JTM.jar</strong> library (e.g. <strong>jtm.activity13</strong> as an (overengineered for your needs) example of your test in <strong>jtm.activity14</strong> package).</li></ol><h2 id="HMoreinfo"><span>More info</span></h2><ul><li><span class="wikiexternallink"><a href="http://odo.lv/ftp/docs/Testesanas_rokasgramata.pdf">Testēšanas rokasgrāmata</a></span></li></ul><p><a name="top"></a></p><table width="100%"><tr><td width="40%" style="border: none; text-align: left;"><span class="wikilink"><a href="https://odo.lv/Training/JavaExercise13">Prev</a></span> <br> <span class="xdocNavigation">13. JDBC</span></td><td width="20%" style="border: none; text-align: center;"><div><p><span class="wikilink"><a href="#top">Up</a></span> <br> <span class="wikilink"><a href="https://odo.lv/Training/Java">Home</a></span></p></div></td><td style="border: none; text-align: right;"><span class="wikilink"><a href="https://odo.lv/Training/JavaExercise15">Next</a></span> <br> <span class="xdocNavigation">15. GUI Application</span></td></tr></table></body></html></body></html>